import{c as pe}from"./config-Yzh8Z29m.js";import{k as X,l as I,m as R,u as me,n as g,q as P,s as $,v as W,o as u,c as f,x as Y,d as w,w as T,y as ee,b as h,z as _,A as l,B as te,t as z,C as ne,T as se,D as oe,E as fe,G as he,H as ge,I as le,J as ye,K as ve,L as A,M as Z,N as Ce,O as be,P as we,Q as _e,h as D,g as S,R as K,S as Te,F as L,U as Se,V as ke,W as De,X as J,Y as ae,Z as U,$ as q,a0 as Me,a1 as Ee,_ as Ie,r as E,f as O,e as Ne,i as xe}from"./index-CeJBUUbg.js";const Le={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},G={},Re=X({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,dotStyle:{type:I([String,Object,Array])},badgeStyle:{type:I([String,Object,Array])},offset:{type:I(Array),default:[0,0]},dotClass:{type:String},badgeClass:{type:String}}),Ve=["textContent"],Be=R({name:"ElBadge"}),Ae=R({...Be,props:Re,setup(e,{expose:n}){const t=e,o=me("badge"),s=g(()=>t.isDot?"":P(t.value)&&P(t.max)?t.max<t.value?`${t.max}+`:t.value===0&&!t.showZero?"":`${t.value}`:`${t.value}`),i=g(()=>{var a,c,m,v,C,d;return[{backgroundColor:t.color,marginRight:$(-((c=(a=t.offset)==null?void 0:a[0])!=null?c:0)),marginTop:$((v=(m=t.offset)==null?void 0:m[1])!=null?v:0)},(C=t.dotStyle)!=null?C:{},(d=t.badgeStyle)!=null?d:{}]});return W({from:"dot-style",replacement:"badge-style",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},g(()=>!!t.dotStyle)),W({from:"dot-class",replacement:"badge-class",version:"2.8.0",scope:"el-badge",ref:"https://element-plus.org/en-US/component/badge.html"},g(()=>!!t.dotClass)),n({content:s}),(a,c)=>(u(),f("div",{class:_(l(o).b())},[Y(a.$slots,"default"),w(se,{name:`${l(o).namespace.value}-zoom-in-center`,persisted:""},{default:T(()=>[ee(h("sup",{class:_([l(o).e("content"),l(o).em("content",a.type),l(o).is("fixed",!!a.$slots.default),l(o).is("dot",a.isDot),a.dotClass,a.badgeClass]),style:te(l(i)),textContent:z(l(s))},null,14,Ve),[[ne,!a.hidden&&(l(s)||a.isDot)]])]),_:1},8,["name"])],2))}});var Oe=oe(Ae,[["__file","badge.vue"]]);const Pe=fe(Oe),ie=["success","info","warning","error"],p=ge({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:le?document.body:void 0}),Ue=X({customClass:{type:String,default:p.customClass},center:{type:Boolean,default:p.center},dangerouslyUseHTMLString:{type:Boolean,default:p.dangerouslyUseHTMLString},duration:{type:Number,default:p.duration},icon:{type:he,default:p.icon},id:{type:String,default:p.id},message:{type:I([String,Object,Function]),default:p.message},onClose:{type:I(Function),default:p.onClose},showClose:{type:Boolean,default:p.showClose},type:{type:String,values:ie,default:p.type},plain:{type:Boolean,default:p.plain},offset:{type:Number,default:p.offset},zIndex:{type:Number,default:p.zIndex},grouping:{type:Boolean,default:p.grouping},repeatNum:{type:Number,default:p.repeatNum}}),ze={destroy:()=>!0},y=ye([]),He=e=>{const n=y.findIndex(s=>s.id===e),t=y[n];let o;return n>0&&(o=y[n-1]),{current:t,prev:o}},je=e=>{const{prev:n}=He(e);return n?n.vm.exposed.bottom.value:0},Fe=(e,n)=>y.findIndex(o=>o.id===e)>0?16:n,$e=["id"],We=["innerHTML"],Ze=R({name:"ElMessage"}),Ke=R({...Ze,props:Ue,emits:ze,setup(e,{expose:n}){const t=e,{Close:o}=ke,{ns:s,zIndex:i}=ve("message"),{currentZIndex:a,nextZIndex:c}=i,m=A(),v=A(!1),C=A(0);let d;const b=g(()=>t.type?t.type==="error"?"danger":t.type:"info"),V=g(()=>{const r=t.type;return{[s.bm("icon",r)]:r&&Z[r]}}),k=g(()=>t.icon||Z[t.type]||""),N=g(()=>je(t.id)),H=g(()=>Fe(t.id,t.offset)+N.value),ue=g(()=>C.value+H.value),ce=g(()=>({top:`${H.value}px`,zIndex:a.value}));function B(){t.duration!==0&&({stop:d}=De(()=>{x()},t.duration))}function j(){d==null||d()}function x(){v.value=!1}function de({code:r}){r===Le.esc&&x()}return Ce(()=>{B(),c(),v.value=!0}),be(()=>t.repeatNum,()=>{j(),B()}),we(document,"keydown",de),_e(m,()=>{C.value=m.value.getBoundingClientRect().height}),n({visible:v,bottom:ue,close:x}),(r,F)=>(u(),D(se,{name:l(s).b("fade"),onBeforeLeave:r.onClose,onAfterLeave:F[0]||(F[0]=dt=>r.$emit("destroy")),persisted:""},{default:T(()=>[ee(h("div",{id:r.id,ref_key:"messageRef",ref:m,class:_([l(s).b(),{[l(s).m(r.type)]:r.type},l(s).is("center",r.center),l(s).is("closable",r.showClose),l(s).is("plain",r.plain),r.customClass]),style:te(l(ce)),role:"alert",onMouseenter:j,onMouseleave:B},[r.repeatNum>1?(u(),D(l(Pe),{key:0,value:r.repeatNum,type:l(b),class:_(l(s).e("badge"))},null,8,["value","type","class"])):S("v-if",!0),l(k)?(u(),D(l(K),{key:1,class:_([l(s).e("icon"),l(V)])},{default:T(()=>[(u(),D(Te(l(k))))]),_:1},8,["class"])):S("v-if",!0),Y(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(u(),f(L,{key:1},[S(" Caution here, message could've been compromised, never use user's input as message "),h("p",{class:_(l(s).e("content")),innerHTML:r.message},null,10,We)],2112)):(u(),f("p",{key:0,class:_(l(s).e("content"))},z(r.message),3))]),r.showClose?(u(),D(l(K),{key:2,class:_(l(s).e("closeBtn")),onClick:Se(x,["stop"])},{default:T(()=>[w(l(o))]),_:1},8,["class","onClick"])):S("v-if",!0)],46,$e),[[ne,v.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Je=oe(Ke,[["__file","message.vue"]]);let qe=1;const re=e=>{const n=!e||J(e)||ae(e)||U(e)?{message:e}:e,t={...p,...n};if(!t.appendTo)t.appendTo=document.body;else if(J(t.appendTo)){let o=document.querySelector(t.appendTo);Me(o)||(o=document.body),t.appendTo=o}return t},Ge=e=>{const n=y.indexOf(e);if(n===-1)return;y.splice(n,1);const{handler:t}=e;t.close()},Qe=({appendTo:e,...n},t)=>{const o=`message_${qe++}`,s=n.onClose,i=document.createElement("div"),a={...n,id:o,onClose:()=>{s==null||s(),Ge(C)},onDestroy:()=>{q(null,i)}},c=w(Je,a,U(a.message)||ae(a.message)?{default:U(a.message)?a.message:()=>a.message}:null);c.appContext=t||M._context,q(c,i),e.appendChild(i.firstElementChild);const m=c.component,C={id:o,vnode:c,vm:m,handler:{close:()=>{m.exposed.visible.value=!1}},props:c.component.props};return C},M=(e={},n)=>{if(!le)return{close:()=>{}};if(P(G.max)&&y.length>=G.max)return{close:()=>{}};const t=re(e);if(t.grouping&&y.length){const s=y.find(({vnode:i})=>{var a;return((a=i.props)==null?void 0:a.message)===t.message});if(s)return s.props.repeatNum+=1,s.props.type=t.type,s.handler}const o=Qe(t,n);return y.push(o),o.handler};ie.forEach(e=>{M[e]=(n={},t)=>{const o=re(n);return M({...o,type:e},t)}});function Xe(e){for(const n of y)(!e||e===n.props.type)&&n.handler.close()}M.closeAll=Xe;M._context=null;const Q=Ee(M,"$message"),Ye={data(){return{rowData:"",config:pe,pcptLink:"",rawTableData:[],tableHeader:[],outputDict:[],outputMd:"",options:{removeSource:!0,repeatRam:!1},rowTypeMaster:{1:"link",2:"separator",3:"row",9:"unclassified"},newCellValue:"",editingCell:{editing:!1,value:"",rowId:-1,link:""},signatureLink:"[PCPT Cleaner](https://pcptcleaner.sillypot.in)"}},methods:{identifyMd(e){if(e.includes("](")&&!e.includes("|"))return 1;const n=/[a-zA-Z0-9]/;return e.includes("-")&&e.includes("|")&&!n.test(e)?2:e.includes("|")&&n.test(e)?3:9},removeUnwantedWords(e){var n=e.split(" "),t=[];return n.forEach(o=>{!this.config.unwantedWords.includes(o.toLowerCase())&&o.length<13&&t.push(o)}),t.slice(0,8).join(" ")},removeBrackets(e){let n=[],t=0;for(let o of e)!t&&o!=="("&&n.push(o),t+={"(":1,")":-1}[o]||0;return n.join("")},cleanSource(e){if(typeof e>"u"||e===null||e==="")return null;e=e.trim();let n=e.split(" ");return n[0].toLowerCase()=="the"&&n.splice(0,1),n[0]},cleanRow(e){var n=e.split("|"),t=n[0].replaceAll("**","").trim();if(n[0]=this.config.itemMap[t]||t,n[2]=this.cleanSource(n[2]),e=n[1].trim(),e==="")return null;var o=null;if(e.includes("]("))var[e,o]=e.slice(1,-2).split("](");return e=this.removeBrackets(e),e=this.removeUnwantedWords(e),n[1]=o===null?e:`[${e}](${o})`,n.join("|")},handleRow(e){const n=this.cleanRow(e);n&&this.rawTableData.push(n)},identifyAllRows(e){let n=e.split(`
`);this.pcptLink="",this.rawTableData=[],n.forEach(t=>{var o=this.identifyMd(t);o===1&&(this.pcptLink=t),o===3&&this.handleRow(t)}),this.mdToDict(this.rawTableData)},prepareTable(){if(this.rowData==="")return null;this.identifyAllRows(this.rowData);var e=this.outputDict;if(this.options.repeatRam){const t=e.findIndex(s=>s.Item==="RAM"),o=JSON.parse(JSON.stringify(e[t]).replace("RAM","RAM2"));e.splice(t+1,0,o)}const n=e.reduce((t,o)=>{const s=parseInt(o.Price);return t+(isNaN(s)?0:s)},0);e.push({Item:"",Selection:"**Total**",Source:"",Price:"**"+n+"**"}),this.options.removeSource&&(e=e.map(({Item:t,Selection:o,Price:s,...i})=>({Item:t,Selection:o,Price:s})),this.tableHeader.splice(2,1)),this.outputDict=e},mdToDict(e){let n=e[0].split("|");this.tableHeader=n;let t=e.slice(1).map(o=>{let s=o.split("|"),i={};return n.forEach((a,c)=>{var m;i[a]=(m=s[c])==null?void 0:m.trim()}),i});this.outputDict=t},dictToMd(e){let n=Object.keys(e[0]),t=n.join("|"),o="----|",s=o.repeat(n.length-1)+o.slice(0,-1);this.outputMd=t+`
`,this.outputMd+=s+`
`,e.forEach(i=>{this.outputMd+=Object.values(i).join("|")+`
`})},mdProcessor(e){if(typeof e>"u"||e===""||e===null)return null;if(typeof e=="number")return e;if(e.startsWith("**")&&(e!=null&&e.endsWith("**")))return e=e.replaceAll("**",""),`<span style="font-weight: bold;">${e}</span>`;if(e.indexOf("](")!=-1){var n=e.split("]("),t=n[1].slice(0,-1),o=n[0].slice(1);return`<a href="${t}">${o}</a>`}return"<span>"+e+"</span>"},handleEdit(e){var n=this.outputDict[e].Selection;this.editingCell.value=n.slice(1,n.indexOf("]")),this.editingCell.link=n.slice(n.indexOf("(")+1,-2),this.editingCell.editing=!0,this.editingCell.rowId=e,this.newCellValue=this.editingCell.value},handleEditDone(){var e=this.editingCell.rowId;this.outputDict[e].Selection=`[${this.newCellValue}](${this.editingCell.link})`,this.newCellValue="",this.editingCell.editing=!1,this.dictToMd(this.outputDict)},copyTextNoInput(){if(console.log("copy called"),this.outputDict.length===0)return Q({message:"Table is blank",type:"warning"}),null;this.dictToMd(this.outputDict);const e=document.createElement("textarea");e.value=this.pcptLink+`

`,e.value+=this.outputMd,e.value+=`
Made with `+this.signatureLink,document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e),Q({message:"Copied successfully",type:"success"})}}},et={class:"option-buttons"},tt=h("br",null,null,-1),nt=h("br",null,null,-1),st=h("br",null,null,-1),ot={class:"m16"},lt={key:0,style:{"margin-bottom":"12px"}},at=["innerHTML"],it={class:"mt-10"},rt=["innerHTML"],ut=["onClick"];function ct(e,n,t,o,s,i){const a=E("el-input"),c=E("el-col"),m=E("el-switch"),v=E("el-button"),C=E("el-row");return u(),f("div",null,[w(C,{gutter:10},{default:T(()=>[w(c,{xs:16,sm:18,md:18,lg:18,xl:21},{default:T(()=>[w(a,{class:"m16",style:{width:"100%"},type:"textarea",rows:"6",modelValue:s.rowData,"onUpdate:modelValue":n[0]||(n[0]=d=>s.rowData=d),onInput:i.prepareTable,placeholder:"Paste markup copied from pcpricetracker"},null,8,["modelValue","onInput"])]),_:1}),w(c,{xs:8,sm:6,md:6,lg:6,xl:3},{default:T(()=>[h("div",et,[w(m,{modelValue:s.options.repeatRam,"onUpdate:modelValue":n[1]||(n[1]=d=>s.options.repeatRam=d),class:"mt16",onChange:i.prepareTable,"active-text":"Repeat RAM"},null,8,["modelValue","onChange"]),tt,w(m,{modelValue:s.options.removeSource,"onUpdate:modelValue":n[2]||(n[2]=d=>s.options.removeSource=d),class:"mt16",onChange:i.prepareTable,"active-text":"Remove source"},null,8,["modelValue","onChange"]),nt,w(v,{id:"copy-btn",class:"mt16",type:"primary",onClick:i.copyTextNoInput},{default:T(()=>[Ne("Copy ")]),_:1},8,["onClick"]),st])]),_:1})]),_:1}),h("div",ot,[s.outputDict.length>0?(u(),f("h2",lt,"Cleaned table")):S("",!0),h("div",{innerHTML:i.mdProcessor(s.pcptLink),style:{"margin-bottom":"6px"}},null,8,at),h("table",it,[h("thead",null,[h("tr",null,[(u(!0),f(L,null,O(s.tableHeader,(d,b)=>(u(),f("th",{key:b},z(d),1))),128))])]),(u(!0),f(L,null,O(s.outputDict,(d,b)=>(u(),f("tr",{key:b},[(u(!0),f(L,null,O(d,(V,k)=>(u(),f("td",{key:b+"-"+k},[!s.editingCell.editing||s.editingCell.rowId!==b||k!=="Selection"?(u(),f("span",{key:0,innerHTML:i.mdProcessor(V)},null,8,rt)):S("",!0),s.editingCell.editing&&s.editingCell.rowId===b&&k==="Selection"?(u(),D(a,{key:1,size:"small",modelValue:s.newCellValue,"onUpdate:modelValue":n[3]||(n[3]=N=>s.newCellValue=N),onKeypress:xe(i.handleEditDone,["enter"]),id:"edit-cell-"+b},null,8,["modelValue","onKeypress","id"])):S("",!0),k==="Selection"&&!s.editingCell.editing?(u(),f("span",{key:2,onClick:N=>i.handleEdit(b),class:"edit-button"},"edit ",8,ut)):S("",!0)]))),128))]))),128))])])])}const ft=Ie(Ye,[["render",ct]]);export{ft as default};
